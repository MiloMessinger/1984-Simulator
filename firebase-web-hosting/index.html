<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ministry of Truth: Room Explorer</title>
    <style>
        /* Your original CSS */
        body {
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: monospace;
            color: white;
        }
        #gameContainer {
            width: 800px;
            height: 600px;
            position: relative;
            border: 2px solid white;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 10px;
            padding: 10px;
            box-sizing: border-box;
        }
        .room {
            position: relative;
            border: 4px solid white;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 20px;
        }
        .room-label {
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        #player {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: white;
            transition: all 0.1s;
            z-index: 20;
        }
        .furniture {
            position: absolute;
            background-color: gray;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            color: black;
            font-size: 10px;
            font-weight: bold;
        }
        .furniture-label {
            position: absolute;
            color: white;
            font-size: 10px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .furniture-label-bottom {
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
        }
        .random-object {
            position: absolute;
            background-color: red;
            z-index: 10;
        }
        #dialog {
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid white;
            color: white;
            padding: 20px;
            width: 600px;
            display: none;
            z-index: 50;
            text-align: center;
        }
        #dialog button {
            margin: 5px;
            padding: 10px 20px;
            background-color: gray;
            border: none;
            color: white;
            cursor: pointer;
        }
        #dialog button:hover {
            background-color: darkgray;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="victoryMansions" class="room">
            <div class="room-label">Victory Mansions</div>
        </div>
        <div id="ministryOfTruth" class="room">
            <div class="room-label">Ministry of Truth</div>
        </div>
        <div id="room101" class="room">
            <div class="room-label">Room 101</div>
        </div>
        <div id="proleDistrict" class="room">
            <div class="room-label">Prole District</div>
        </div>
        <div id="player"></div>
        <div id="dialog">
            <p id="dialogText"></p>
            <div id="dialogChoices"></div>
        </div>
    </div>

    <script>
        const player = document.getElementById('player');
        const container = document.getElementById('gameContainer');
        const dialog = document.getElementById('dialog');
        const dialogText = document.getElementById('dialogText');
        const dialogChoices = document.getElementById('dialogChoices');

        let playerX = 50;
        let playerY = 50;
        let alignment = 0; // Tracks rebellion (-) vs. compliance (+)

        // Helper function to show dialog
        function showDialog(text, choices) {
            dialogText.textContent = text;
            dialogChoices.innerHTML = '';
            choices.forEach(choice => {
                const button = document.createElement('button');
                button.textContent = choice.text;
                button.addEventListener('click', () => {
                    choice.action();
                    dialog.style.display = 'none';
                });
                dialogChoices.appendChild(button);
            });
            dialog.style.display = 'block';
        }

        // Interaction functions for objects
        function interactWithTelescreen() {
            showDialog(
                'The telescreen blares Party propaganda. Do you listen or turn it off?',
                [
                    { 
                        text: 'Listen', 
                        action: () => { 
                            alignment += 1; 
                            alert('You feel more loyal to the Party.');
                        } 
                    },
                    { 
                        text: 'Turn it off', 
                        action: () => { 
                            alignment -= 1; 
                            alert('A dangerous act of rebellion!');
                        } 
                    }
                ]
            );
        }

        function interactWithDiary() {
            showDialog(
                'You find Winstonâ€™s secret diary. Do you write down rebellious thoughts or hide it?',
                [
                    { 
                        text: 'Write in it', 
                        action: () => { 
                            alignment -= 2; 
                            alert('The act of rebellion inspires you.');
                        } 
                    },
                    { 
                        text: 'Hide it', 
                        action: () => { 
                            alignment += 1; 
                            alert('Safer to comply for now.');
                        } 
                    }
                ]
            );
        }

        function interactWithProles() {
            showDialog(
                'A Prole offers you information about the rebellion. Do you listen or report them?',
                [
                    { 
                        text: 'Listen', 
                        action: () => { 
                            alignment -= 1; 
                            alert('You learn about the resistance.');
                        } 
                    },
                    { 
                        text: 'Report them', 
                        action: () => { 
                            alignment += 2; 
                            alert('The Party rewards your loyalty.');
                        } 
                    }
                ]
            );
        }

        // Ending functions
        function checkEnding() {
            if (alignment <= -3) {
                alert('You escape to join the rebellion! Victory!');
            } else if (alignment >= 3) {
                alert('You are caught and sent to Room 101. Game Over.');
            }
        }

        // Furniture creation
        function createFurniture() {
            const telescreen = document.createElement('div');
            telescreen.classList.add('furniture');
            telescreen.style.width = '200px';
            telescreen.style.height = '20px';
            telescreen.style.top = '50px';
            telescreen.style.left = '100px';
            telescreen.addEventListener('click', interactWithTelescreen);
            document.getElementById('victoryMansions').appendChild(telescreen);

            const diary = document.createElement('div');
            diary.classList.add('furniture');
            diary.style.width = '120px';
            diary.style.height = '50px';
            diary.style.top = '150px';
            diary.style.left = '50px';
            diary.addEventListener('click', interactWithDiary);
            document.getElementById('victoryMansions').appendChild(diary);

            const prole = document.createElement('div');
            prole.classList.add('random-object');
            prole.style.width = '50px';
            prole.style.height = '50px';
            prole.style.top = '200px';
            prole.style.left = '150px';
            prole.addEventListener('click', interactWithProles);
            document.getElementById('proleDistrict').appendChild(prole);
        }

        document.addEventListener('keydown', (event) => {
            const speed = 20;
            switch (event.key) {
                case 'ArrowUp': playerY -= speed; break;
                case 'ArrowDown': playerY += speed; break;
                case 'ArrowLeft': playerX -= speed; break;
                case 'ArrowRight': playerX += speed; break;
            }
            player.style.left = `${playerX}px`;
            player.style.top = `${playerY}px`;
            checkEnding();
        });

        // Initialize game
        createFurniture();
    </script>
</body>
</html>
